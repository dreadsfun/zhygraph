<DI>
	<plugins>
		<shared lib="win32windowing"/>
		<shared lib="ogl_graphics"/>
		<shared lib="core"/>
        <shared lib="cAPI"/>
		<shared lib="py_scripting"/>
	</plugins>
	
	<components>
        <component name="rch_initializer" class="rch_initializer"/>
        <component name="capi_bridge" class="capi_bridge"/>
		<component name="windowing" class="win32windowing_library"/>
        <component name="resource_context_handle" class="resource_context_handle"/>
        <component name="graphics_resource_context" class="win32gl_context"/>
		<component name="graphics_context" class="win32gl_context"/>
		<component name="engine_launcher" class="launcher"/>
		<component name="default_logger" class="logger"/>
		<component name="scripting" class="py_scripting"/>
		
		<component name="n_stdout_channel" class="stdout_channel"/>
		<component name="messagebox_channel" class="win32messagebox"/>
		
		<component name="n_file_channel" class="file_channel">
			<attribute name="file" value="engine.log"/>
		</component>

        <component name="graphics" class="ogl_graphics">
			<attribute name="use_visibility_check" value="true"/>
			<attribute name="octree_root_size" value="1000.0"/>
		</component>
		
		<component name="asset_streamer" class="filesystem_streamer"/>
		<component name="asset_type_manager" class="asset_type_manager"/>
		
		<component name="text_manager" class="text_file_manager">
			<attribute name="assets">
                <insert value="text@materials.xml"/>
                <insert value="text@scenes.xml"/>
            </attribute>
			<attribute name="search_urls">
				<insert value="assets"/>
				<insert value="assets:xml"/>
			</attribute>
		</component>

		<component name="script_manager" class="py_script_manager">
			<attribute name="assets">
				<insert value="script@test.py"/>
				<insert value="script@camera.py"/>
			</attribute>
			<attribute name="search_urls">
				<insert value="assets"/>
				<insert value="assets:script"/>
				<insert value="py_api"/>
				<insert value="py_api:custom"/>
			</attribute>
		</component>
		
		<component name="shader_manager" class="shader_manager">
		  <attribute name="assets">
			<insert value="shader@mesh_renderer_node_vertex.glsl"/>
			<insert value="shader@test_fragment.glsl"/>
		  </attribute>
		  <attribute name="search_urls">
				<insert value="assets"/>
				<insert value="assets:shader"/>
		  </attribute>
		</component>

		<component name="texture_manager" class="texture_manager">
		  <attribute name="assets">
			 <insert value="texture@texture.png"/>
		   </attribute>
		   <attribute name="search_urls">
				<insert value="assets"/>
				<insert value="assets:texture"/>
		   </attribute>
		</component>

		<component name="mesh_manager" class="mesh_manager">
		  <attribute name="assets">
			<insert value="mesh@tent.obj"/>
			<insert value="mesh@cube.obj"/>
			<insert value="mesh@cone.obj"/>
			<insert value="mesh@cylinder.obj"/>
			<insert value="mesh@torus.obj"/>
			<insert value="mesh@landscape.obj"/>
			<insert value="mesh@monkey.obj"/>
			<insert value="mesh@sphere.obj"/>
			<insert value="mesh@icosphere.obj"/>
			<insert value="mesh@ls1.obj"/>
			<insert value="mesh@ls2.obj"/>
			<insert value="mesh@ls3.obj"/>
			<insert value="mesh@ls4.obj"/>
			<insert value="mesh@ls5.obj"/>
			<insert value="mesh@ls6.obj"/>
			<insert value="mesh@ls7.obj"/>
			<insert value="mesh@ls8.obj"/>
			<insert value="mesh@ls9.obj"/>
			<insert value="mesh@ls10.obj"/>
			<insert value="mesh@ls11.obj"/>
			<insert value="mesh@ls12.obj"/>
			<insert value="mesh@ls13.obj"/>
			<insert value="mesh@ls14.obj"/>
			<insert value="mesh@ls15.obj"/>
		  </attribute>
		  <attribute name="search_urls">
				<insert value="assets"/>
				<insert value="assets:mesh"/>
		  </attribute>
		</component>
		
		<component name="scene_manager_updater" class="scene_manager_update_listener"/>
		
		<component name="scene_manager" class="default_scene_manager">
			<attribute name="scene_file" value="text@scenes.xml"/>
		</component>
		
		<component name="material_library" class="material_library">
			<attribute name="material_file" value="text@materials.xml"/>
		</component>
	</components>
	
	<wiring>
		<inject-one receiver="asset_type_manager">
			<inject slot="managers" injection="text_manager"/>
			<inject slot="managers" injection="shader_manager"/>
			<inject slot="managers" injection="texture_manager"/>
			<inject slot="managers" injection="mesh_manager"/>
			<inject slot="managers" injection="script_manager"/>
		</inject-one>
        
        <inject-one receiver="resource_context_handle">
            <inject slot="windowing" injection="windowing"/>
            <inject slot="resource_context" injection="graphics_resource_context"/>
            <inject slot="main_context" injection="graphics_context"/>
        </inject-one>
        
        <inject-one receiver="capi_bridge">
            <inject slot="scene_manager" injection="scene_manager"/>
			<inject slot="windowing" injection="windowing"/>
        </inject-one>
	
		<inject-one receiver="scene_manager_updater">
			<inject slot="manager" injection="scene_manager"/>
		</inject-one>
	
		<inject-one receiver="engine_launcher">
			<inject slot="graphics" injection="graphics"/>
			<inject slot="scene_manager" injection="scene_manager"/>
			<inject slot="update_listeners" injection="scene_manager_updater"/>
            <inject slot="initialization_listeners" injection="rch_initializer"/>
            <inject slot="windowing" injection="windowing"/>
            <inject slot="graphics_context" injection="graphics_context"/>
			<inject slot="scripting" injection="scripting"/>
		</inject-one>
		
		<inject-one receiver="default_logger">
			<inject slot="channels" injection="n_stdout_channel"/>
			<inject slot="channels" injection="n_file_channel"/>
			<inject slot="channels" injection="messagebox_channel"/>
		</inject-one>
        
        <inject-one receiver="rch_initializer">
            <inject slot="owner" injection="resource_context_handle"/>
        </inject-one>
		
		<inject-one receiver="graphics">
			<inject slot="windowing" injection="windowing"/>
		</inject-one>
		
		<inject-slot slot="logger" injection="default_logger"/>
		<inject-slot slot="streamer" injection="asset_streamer"/>
		<inject-slot slot="type_manager" injection="asset_type_manager"/>
	</wiring>
</DI>